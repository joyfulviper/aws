## DNS
- IP 주소를 사람이 보는 식별 정보로 하기에는 기억하기가 쉽지 않음
- 이를 위해 IP 주소를 이름으로 결정해주는 시스템을 DNS라고 함
- DNS는 도메인 이름을 도메인 계층에 맞춰 분해해서 관리함
- 즉, 도메인별로 도메인을 관리하는 DNS 서버가 제공됨
- 그렇다 하더라도 어떤 DNS 서버에 질의하더라도 전 세계의 모든 도메인 이름을 IP 주소로 변환이 가능함.(다음의 절차 때문)
  - DNS 서버가 관리하는 도메인이면 존재하는 IP 주소를 반환한다.
  - DNS 서버가 관리하는 도메인의 서브 도메인이면, 서브 도메인을 관리하는 DNS 서버에 질의한다.
  - 그 이외의 도메인이면 자신이 소속된 상위 DNS 서버에 질의한다.
아래의 상황을 예시로 보자
Route 53이라는 DNS 서버에 b.jpub.co.kr 이라는 도메인 이름에 대한 IP 주소의 이름 결정을 질의해보자.
이 때 Route53은 b.jpub.co.kr이라는 도메인을 갖고 있으므로 바로 ip 주소를 반환할 수 있다.
<br>
다음으로 Route53에 google.co.kr 이라는 도메인 이름에 대한 IP 주소의 이름 결정을 질의해보자.
1. Route53은 google.co.kr이라는 도메인을 관리하고 있지 않는다.
2. 따라서 자신이 갖고 있는 도메인(b.jpub.co.kr)이 google.co.kr이라는 도메인의 서브 도메인으로 갖는지 확인한다.
3. 갖고있지 않으므로 .co.kr 도메인을 관리하는 상위 DNS 서버에 질의를 한다.
4. .co.kr을 관리하는 DNS 서버는 .google.co.kr 도메인을 관리하는, 바로 아래의 DNS 서버에 이름을 질의한다.
5. 이제 .google.co.kr을 관리하는 DNS 서버에 의해 .google.co.kr의 ip 주소를 얻었다.
**하나의 도메인 이름이 여러개의 IP 주소를 갖고 있을 수 있고, 하나의 IP 주소가 여러개의 도메인 이름을 가질 수 있다.**
## SSL 서버 인증서
- 웹사이트에서 통신을 할 때 HTTP, HTTPS 프로토콜을 이용하는데 두 프로토콜의 가장 큰 차이는 웹 서버와 브라우저 사이에서 통신이 수행되는 방법임
- 브라우저로 부터 어떤 웹 서버로 보내진 암호화 된 데이터는 사이트 운영자가 가진 비밀 키를 이용해 원래 데이터로 되돌릴 수 있음
- 그러나 운영자 외의 악의를 가진 누군가가 운영자로 위장한(피싱) 사이트를 구축해 데이터를 훔칠 가능성도 있음
- 따라서 이렇게 위장하지 않았음을 보장하는 회사들이 있는데 이를 인증 기관이라고 함.
- 그리고 이 보장을 증명하는 것이 SSL 서버 인증서임

### SSL 인증서는 다음의 순서로 운용됨
1. 운영자는 인증 기관에 사이트 도메인을 증명하는 인증서 발급을 요청
2. 인증 기관은 운영자에게 SSL 서버 인증서를 발행
3. 사이트를 열람한 사람은 이 인증서를 브라우저로 확인 가능(주소창의 자물쇠 버튼 누르면 됨)

## Route53의 기능
- 도메인 이름 등록
  - 상위 도메인을 관리하는 조직에 자신의 도메인을 요청해서 등록하는 것
  - jpub.co.kr이라는 도메인을 등록하려면 Route53에 등록할 뿐만 아니라 co.kr이라는 상위 도메인에게도 알려줘야 함
  - 근데 좀 비싼듯 11달러임 세금 빼고
- DNS 서버
  - DNS 서버의 기능도 제공함(퍼블릭, 프라이빗)


## Certificate Manager
- 인증서 공짜로 발급해줌
- 인증서 발급하려면 도메인 필요함

## AWS에서 직접 해보기
DNS 사려면 돈이 들어 시나리오만 설명 하겠음
1. public dns를 생성
2. 생성한 dns를 로드밸런서, 점프 서버에 연결(라우팅 정책은 단순 라우팅으로)
3. private dns를 생성
4. private ec2, rds에 연결
5. SSL 인증서 발행
6. 5에서 생성한 인증서와 연결된 Route53내의 도메인 서비스에서 레코드 생성(인증서 검증을 위해)
7. 로드 밸런서에 https 리스너 추가
